<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Coreos-osx by TheNewNormal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Coreos-osx</h1>
      <h2 class="project-tagline">CoreOS VM for OS X</h2>
      <a href="https://github.com/TheNewNormal/coreos-osx" class="btn">View on GitHub</a>
      <a href="https://github.com/TheNewNormal/coreos-osx/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/TheNewNormal/coreos-osx/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="coreos-vm-for-os-x-" class="anchor" href="#coreos-vm-for-os-x-" aria-hidden="true"><span class="octicon octicon-link"></span></a>CoreOS VM for OS X </h1>

<p><strong><em>CoreOS VM for OS X App has a new home, it is now under <a href="https://github.com/TheNewNormal">https://github.com/TheNewNormal</a> organisation</em></strong></p>

<p><strong>CoreOS VM for OS X</strong> (coreos-machine) is a Mac Status bar App which works like a wrapper around the <a href="https://github.com/TheNewNormal/corectl">corectl</a> command line tool (it makes easier to control <a href="https://github.com/mist64/xhyve">xhyve</a> based VMs). </p>

<p>It includes <a href="https://github.com/docker/distribution">Docker Registry v2</a> (Go based and compiled for OS X)</p>

<p>It supports only a standalone CoreOS VM, cluster one (Vagrant based) is at <a href="https://github.com/rimusz/coreos-osx-cluster">CoreOS Cluster for OS X</a>.</p>

<p><strong>New</strong> v1.1.0 is based on <a href="https://github.com/TheNewNormal/corectl">corectl</a> which brings more stablity to the App. App got renamed from <code>CoreOS GUI</code> to <code>CoreOS</code>. Mac user home folder is automaticly mounted to VM.</p>

<p><img src="coreos-osx-gui.png" alt="CoreOS-OSX" title="CoreOS-OSX-GUI"></p>

<h2>
<a id="how-to-install-coreos-vm-for-os-x" class="anchor" href="#how-to-install-coreos-vm-for-os-x" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to install CoreOS VM for OS X</h2>

<p><strong>Requirements</strong></p>

<hr>

<ul>
<li>
<strong>OS X 10.10.3</strong> Yosemite or later </li>
<li>Mac 2010 or later for this to work.</li>
<li>If you want to use this App with any other VirtualBox based VM, you need to use newest versions of VirtualBox 4.3.x or 5.0.x.</li>
</ul>

<h4>
<a id="download" class="anchor" href="#download" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download:</h4>

<ul>
<li>Download <code>CoreOS OSX latest.dmg</code> from the <a href="https://github.com/TheNewNormal/coreos-osx/releases">Releases Page</a>
</li>
</ul>

<h3>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install:</h3>

<p>Open downloaded <code>dmg</code> file and drag the App e.g. to your Desktop. Start the <code>CoreOS OSX</code> and <code>Initial setup of CoreOS OSX</code> will run.</p>

<p><strong>TL;DR</strong></p>

<ul>
<li>App's files are installed to <code>~/coreos-osx</code> folder</li>
<li>CoreOS ISO files are stored under <code>~/.coreos</code> folder</li>
<li>Docker registry runs on <code>192.168.64.1:5000</code> and images are stored under <code>~/coreos-osx/registry</code>
</li>
<li>Mac user home folder is automaticly mounted to VM: <code>/Users/my_user</code>:<code>/Users/my_user</code>
</li>
<li>OS X <code>fleetctl</code> and <code>docker</code> clients are installed to <code>~/coreos-osx/bin</code> and preset in <code>OS shell</code> to be used from there</li>
</ul>

<p><strong>The install will do the following:</strong></p>

<ul>
<li>All dependent files/folders will be put under <code>coreos-osx</code> folder in the user's home folder e.g /Users/someuser/coreos-osx</li>
<li>Mac user home folder is automaticly mounted to VM: <code>/Users/my_user</code> can be accessed on VM via the same <code>/Users/my_user</code>, it is very handy for using docker mounted volumes </li>
<li>User's Mac password will be stored in <code>OS X Keychain</code>, it will be used to pass to <code>sudo</code> command which needs to be used starting the VM, this allows to avoid using <code>sudo</code> for <code>corectl</code> to start a VM. </li>
<li>ISO images are stored under <code>~/.coreos/images</code>
That allows to share the same images between different <code>corectl</code> based Apps and also speeds up this App VMs reinstall</li>
<li>user-data file will have fleet, etcd, and Docker Socket for the API enabled</li>
<li>Will download latest CoreOS ISO image and run <code>corectl</code> to initialise VM with docker 2375 port pre-set for docker OS X client</li>
<li>Will download and install <code>fleetctl</code> and <code>docker</code> OS X clients to ~/coreos-osx/bin/</li>
<li>A small shell script <code>rkt</code> will be installed to ~/coreos-osx/bin/ which allows to call via ssh remote <code>rkt</code> binary on CoreOS VM</li>
<li>A small shell script <code>etcdctl</code> will be installed to ~/coreos-osx/bin/ which allows to call via ssh remote <code>etcdctl</code> binary on CoreOS VM</li>
<li>
<code>docker-exec</code> script (docker exec -it $1 bash -c 'export TERM=xterm &amp;&amp; bash') will be installed 
into ~/coreos-osx/bin/ too, which allows to enter container with just a simple command:
docker-exec container_name </li>
<li>Also <code>docker2aci</code> binary will be installed to ~/coreos-osx/bin/, which allows to convert docker images to <code>rkt</code> aci images</li>
<li>Will install <a href="http://fleetui.com">Fleet-UI</a> and <a href="https://github.com/crosbymichael/dockerui">DockerUI</a> via unit files</li>
<li>Via assigned static IP (it will be shown in first boot and will survive VM's reboots) you can access any port on CoreOS VM</li>
<li>user-data file enables docker flag <code>--insecure-registry</code> to access insecure registries.</li>
<li>Root persistant disk will be created and mounted to <code>/</code> so data will survive VM reboots. </li>
</ul>

<h2>
<a id="how-it-works" class="anchor" href="#how-it-works" aria-hidden="true"><span class="octicon octicon-link"></span></a>How it works</h2>

<p>Just start <code>CoreOS OSX GUI</code> application and you will find a small icon with the CoreOS logo with <code>h</code>in the Status Bar.</p>

<ul>
<li>There you can <code>Up</code>, <code>Halt</code>, <code>Reload</code> CoreOS VM</li>
<li>
<code>SSH to core-01</code> (vagrant ssh) will open VM shell</li>
<li>Under <code>Up</code> OS Shell will be opened when VM boot finishes up and it will have such environment pre-set:</li>
</ul>

<pre><code>DOCKER_HOST=tcp://192.168.64.xxx:2375
ETCDCTL_PEERS=http://192.168.64.xxx:2379
FLEETCTL_ENDPOINT=http://192.168.64.xxx:2379
FLEETCTL_DRIVER=etcd
</code></pre>

<pre><code>Path to `~/coreos-osx/bin` where docker and fleetctl binaries, rkt, etcdclt 
and docker-exec shell scripts are stored
</code></pre>

<ul>
<li>
<code>OS Shell</code> opens OS Shell with the same enviroment preset as <code>Up</code>
</li>
<li>
<code>Updates/Check updates for OS X fleetctl and docker clients</code> will update fleet and docker OS X clients to the same versions as CoreOS VM runs.</li>
<li>
<code>Updates/Fetch latest CoreOS ISO</code> will download the lasted CoreOS ISO file for the currently set release channel. </li>
<li>
<a href="http://fleetui.com">Fleet-UI</a> dashboard will show running <code>fleet</code> units and etc</li>
<li>
<a href="https://github.com/crosbymichael/dockerui">DockerUI</a> will show all running containers and etc</li>
<li>Put your fleet units into <code>~/coreos-osx/my_fleet</code> folder and they will be automaticly started on each VM boot.</li>
<li>You can upload your saved/exported docker images place in <code>~/coreos-osx/docker_images</code> folder via <code>Upload docker images</code>
</li>
<li>Local Docker Registry v2 (Go based and compiled for  OS X) is running on <code>192.168.64.1:5000</code>, which gets started/stopped on each VM Up/Halt.</li>
<li>This App has as much automation as possible to make easier to use CoreOS on OS X, e.g. you can change CoreOS release channel and reload VM as <code>root</code> persistant disk for VM will be created and mounted to <code>/</code> so data will survive VM reboots.</li>
</ul>

<h2>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<ul>
<li>To <a href="https://github.com/AntonioMeireles">Ant√≥nio Meireles</a> for his awesome <a href="https://github.com/TheNewNormal/corectl">corectl</a> tool to easily control <a href="https://github.com/mist64/xhyve">xhyve</a>
</li>
<li>To <a href="https://github.com/mist64">Michael Steil</a> for the awesome <a href="https://github.com/mist64/xhyve">xhyve</a> lightweight OS X virtualization solution</li>
<li>To Kelsey Hightower for <a href="https://github.com/kelseyhightower/docker-registry-osx-setup-guide">Docker Registry OS X Setup Guide</a>.</li>
</ul>

<h2>
<a id="other-coreos-vm-based-apps" class="anchor" href="#other-coreos-vm-based-apps" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other CoreOS VM based Apps</h2>

<ul>
<li>Cluster one CoreOS VM App can be found here <a href="https://github.com/rimusz/coreos-osx-cluster">CoreOS Cluster for OSX</a>.</li>
<li>Kubernetes Solo Cluster VM App (corectl based) can be found here <a href="https://github.com/TheNewNormal/kube-solo-osx">Kube Solo</a>.</li>
<li>Kubernetes Cluster one CoreOS VM App can be found here <a href="https://github.com/rimusz/coreos-osx-kubernetes-cluster">CoreOS Kubernetes Cluster for OSX </a>.</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/TheNewNormal/coreos-osx">Coreos-osx</a> is maintained by <a href="https://github.com/TheNewNormal">TheNewNormal</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
